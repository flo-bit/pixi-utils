<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
  </head>
  <body style="overflow: hidden; background-color: black">
    <script type="module">
      import PixiScaffold from "https://flo-bit.github.io/pixi-scaffold/pixi-scaffold.js";
      import * as MANIAC from "./pixi-utils.js";

      class Game {
        assets = {
          warning: "./assets/warning.png",
        };
        setup(p) {
          window.PS.add = (child) => {
            let c = MANIAC.Utils.process(child);
            if (c != undefined) PS.addChild(c);
            return c;
          };

          this.rect = PS.add({
            shape: "rect",
            color: 0x0000aa,
            alpha: 0.5,
            width: PS.w,
            height: PS.h,
          });

          this.circle = PS.add({
            shape: "circle",
            radius: Math.min(PS.w, PS.h) / 15,
            color: 0xff0000,
            x: (PS.w * Math.cos(0)) / 3,
            y: (PS.h * Math.sin(0)) / 3,

            children: [
              {
                type: "sprite",
                texture: PS.textures.warning,
                anchorX: 0.5,
                anchorY: 0.56,
                zIndex: -1,
              },
            ],
          });
        }
        update(dt, total) {
          this.circle.x = (PS.w * Math.cos(total * 0.1)) / 3;
          this.circle.y = (PS.h * Math.sin(total * 0.1)) / 3;
        }
      }
      let app = new PixiScaffold(new Game());
    </script>
  </body>
</html>
